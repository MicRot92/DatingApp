<div class="card bg-base-100  max-w-xl mx-auto flex flex-col p-6 rounded-lg shadow-lg">
    <div class="card-title justify-center text-3xl text-primary">Register</div>
    <div class="card-body w-full"></div>

    <ul class="steps steps-horizontal">
        <li [class]="currentStep() >= 1 ? 'step step-primary' : 'step'"> Credentials </li>
        <li [class]="currentStep() >= 2 ? 'step step-primary' : 'step'"> Profile </li>
    </ul>

    @if (currentStep() === 1) {

    <form (ngSubmit)="register()" [formGroup]="credentialsForm" class="steps flex flex-col">
        <div class="mb-4">
            <app-text-input label="Display Name" formControlName="displayName"> </app-text-input>
        </div>
        <div class="mb-4">
            <app-text-input label="Email" formControlName="email"> </app-text-input>
        </div>
        <div class="mb-4">
            <app-text-input label="Password" formControlName="password" type="password"> </app-text-input>
        </div>
        <div class="mb-4">
            <app-text-input label="Confirm Password" formControlName="confirmPassword" type="password">
            </app-text-input>
        </div>
        <div class="flex flex-row justify-end">
            <button type="button" [disabled]="credentialsForm.invalid" (click)="nextStep()"
                class="btn btn-primary mr-2">Next</button>
            <button type="button" (click)="cancel()" class="btn btn-secondary">Cancel</button>
        </div>
    </form>
    } @else if (currentStep() === 2) {
    <form (ngSubmit)="register()" [formGroup]="profileForm" class="flex flex-col steps">
        <div class="flex flex-col">
            <div class="mb-4">
                <div class="font-semibold mt-10 mb-2">Gender</div>
                <div class="flex gap-6">
                    <label class="flex gap-2 items-center cursor-pointer">
                        <input type="radio" formControlName="gender" value="male" class="radio radio-primary" />
                        <span>Male</span>
                    </label>
                    <label class="flex gap-2 items-center cursor-pointer">
                        <input type="radio" formControlName="gender" value="female" class="radio radio-primary" />
                        <span>Female</span>
                    </label>
                </div>
            </div>
            <div class="mb-4">
                <app-text-input [maxDate]="getMaxDate()" label="Date of Birth" formControlName="dateOfBirth"
                    type="date"> </app-text-input>
            </div>
            <div class="mb-4">
                <app-text-input label="City" formControlName="city"> </app-text-input>
            </div>
            <div class="mb-4">
                <app-text-input label="Country" formControlName="country"> </app-text-input>
            </div>

            <div>
                <button type="button" (click)="prevStep()" class="btn btn-secondary mr-2">Back</button>
                <button [disabled]="profileForm.invalid" (click)="register()" type="submit"
                    class="btn btn-primary">Register</button>
            </div>
        </div>
    </form>
    }

    @if (validationErrors().length > 0) {
    <div class="alert alert-error mt-4">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>
                <ul class="list-disc list-inside">
                    @for (error of validationErrors(); track $index) {
                    <li>{{error}}</li>
                    }
                </ul>
            </span>
        </div>
    </div>
    }

    <div class="flex flex-col items-start mt-10 px-5 w-full mockup-code text-sm">
        <div>Form Value: {{ credentialsForm.value | json }}</div>
        <div>Form Status: {{ credentialsForm.status | json }}</div>
    </div>

</div>